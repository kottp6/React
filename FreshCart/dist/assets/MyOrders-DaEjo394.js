import{r as t,C as g,j as s,b as y}from"./index-D1iCoGWQ.js";function b(){var n;const{userId:a,numOfCartItems:o,cartDetails:l}=t.useContext(g),[j,d]=t.useState(null),[u,c]=t.useState(!1),[N,r]=t.useState([]),[m,h]=t.useState(0);console.log(a);async function p(){c(!0);try{const{data:e}=await y.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${a}`);console.log(e),h(e[e.length-1].totalOrderPrice),r(e)}catch(e){console.log(e),d(e.response.data.message),r([])}finally{c(!1)}}return t.useEffect(()=>{a&&p()},[a]),s.jsx(s.Fragment,{children:s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"My Orders"}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between py-3",children:[s.jsxs("h4",{className:"text-xl",children:["Total Item :",s.jsxs("span",{className:"text-green-500 ",children:[" ",o," items"]})]}),s.jsxs("h4",{className:"text-xl",children:["Total Price : ",s.jsxs("span",{className:"text-green-500 ",children:[m," EGP"]})]})]}),s.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:s.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[s.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-16 py-3",children:s.jsx("span",{className:"sr-only",children:"Image"})}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Qty"}),s.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"})]})}),s.jsx("tbody",{children:(n=l==null?void 0:l.products)==null?void 0:n.map(e=>{var x,i;return s.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx("td",{className:"p-4",children:s.jsx("img",{src:(x=e==null?void 0:e.product)==null?void 0:x.imageCover,className:"w-16 md:w-32 max-w-full max-h-full",alt:"Apple Watch"})}),s.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900 dark:text-white",children:(i=e==null?void 0:e.product)==null?void 0:i.title}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center",children:e==null?void 0:e.count})}),s.jsxs("td",{className:"px-6 py-4 font-semibold text-gray-900 dark:text-white",children:[e==null?void 0:e.price," EGP"]})]},e._id)})})]})})]})]})})})}export{b as default};
