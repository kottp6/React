import{u as x,r as n,C as b,e as y,f as s,h as p,j as e,B as k}from"./index-D1iCoGWQ.js";function j(){const i=x(),[a,d]=n.useState(!1),{getPaymentCash:c,cartId:o}=n.useContext(b),u={details:"",phone:"",city:""},h=y({details:s().required("Name is Required"),city:s().required("City is Required"),phone:s().matches(/^(002)?01[0125][0-9]{8}$/i,"Phone Number Must Contain 11 No").required("Phone is Required")});let r=p({initialValues:u,validationSchema:h,onSubmit:m});async function m(l){console.log("submit",l);const g=a?`https://ecommerce.routemisr.com/api/v1/orders/checkout-session/${o}?url=http://localhost:5173`:`https://ecommerce.routemisr.com/api/v1/orders/${o}`,t=await c(g,l);t.status==="success"&&(console.log("data",t),a?window.location.href=t.session.url:(k.success("Payment done successfully"),setTimeout(()=>{i("/allorders")},3e3)))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-w-xl mx-auto",children:e.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Checkout"})}),e.jsxs("form",{onSubmit:r.handleSubmit,className:"max-w-xl mx-auto",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"details",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Enter Your Details"}),e.jsx("input",{type:"text",id:"details",name:"details",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500",placeholder:"ex: 01288845234",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.details}),r.errors.details&&r.touched.details&&e.jsx("div",{className:"alert alert-error",children:r.errors.details})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"city",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Enter Your City"}),e.jsx("input",{type:"text",id:"city",name:"city",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500",placeholder:"ex: 01288845234",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.city}),r.errors.city&&r.touched.city&&e.jsx("div",{className:"alert alert-error",children:r.errors.city})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Enter Your Phone"}),e.jsx("input",{type:"text",id:"phone",name:"phone",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-green-500 dark:focus:border-green-500",placeholder:"ex: 01288845234",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.phone}),r.errors.phone&&r.touched.phone&&e.jsx("div",{className:"alert alert-error",children:r.errors.phone})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("input",{type:"checkbox",className:"mx-1 rounded",name:"",id:"isOnline",onChange:()=>d(!a)}),e.jsx("label",{htmlFor:"isOnline",children:"Is Pay Online"})]}),e.jsx("button",{type:"submit",className:"btn btn-green w-full",children:a?"Pay Online":"Pay Cash"})]})]})}export{j as default};
